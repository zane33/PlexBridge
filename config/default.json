{
  "server": {
    "port": 3000,
    "host": "0.0.0.0",
    "environment": "development"
  },
  "database": {
    "path": "./data/database/plextv.db"
  },
  "cache": {
    "host": "localhost",
    "port": 6379,
    "db": 0,
    "ttl": {
      "epg": 3600,
      "streams": 300,
      "api": 60
    }
  },
  "ssdp": {
    "port": 1900,
    "friendlyName": "PlexTV Development",
    "manufacturer": "PlexTV",
    "modelName": "PlexTV Bridge",
    "modelNumber": "1.0",
    "description": "IPTV to Plex Bridge Interface"
  },
  "streams": {
    "maxConcurrent": 5,
    "transcodeEnabled": true,
    "ffmpegPath": "/usr/bin/ffmpeg",
    "supportedFormats": ["hls", "dash", "rtsp", "rtmp", "udp", "http", "mms", "srt"],
    "autoDetectFormat": true,
    "timeout": 30000,
    "reconnectAttempts": 3,
    "bufferSize": 65536
  },
  "protocols": {
    "rtsp": {
      "transport": "tcp",
      "timeout": 10000,
      "port": 554
    },
    "udp": {
      "bufferSize": 65536,
      "timeout": 5000
    },
    "http": {
      "userAgent": "PlexTV/1.0",
      "timeout": 30000,
      "followRedirects": true
    },
    "srt": {
      "latency": 120,
      "encryption": "none"
    }
  },
  "epg": {
    "refreshInterval": "4h",
    "cacheTtl": 3600,
    "maxFileSize": 104857600,
    "timeout": 60000
  },
  "plexlive": {
    "ssdp": {
      "enabled": true,
      "discoverableInterval": 30000,
      "announceInterval": 1800000,
      "multicastAddress": "239.255.255.250",
      "deviceDescription": "IPTV to Plex Bridge Interface"
    },
    "streaming": {
      "maxConcurrentStreams": 5,
      "maxConcurrentPerChannel": 3,
      "streamTimeout": 30000,
      "sessionTimeout": 3600000,
      "reconnectAttempts": 3,
      "bufferSize": 65536,
      "adaptiveBitrate": true,
      "preferredProtocol": "hls",
      "enforceUniqueSessions": true
    },
    "transcoding": {
      "enabled": true,
      "hardwareAcceleration": false,
      "preset": "medium",
      "videoCodec": "h264",
      "audioCodec": "aac",
      "qualityProfiles": {
        "low": { "resolution": "720x480", "bitrate": "1000k" },
        "medium": { "resolution": "1280x720", "bitrate": "2500k" },
        "high": { "resolution": "1920x1080", "bitrate": "5000k" }
      },
      "defaultProfile": "medium",
      "mpegts": {
        "enabled": true,
        "ffmpegArgs": "-hide_banner -loglevel error -reconnect 1 -reconnect_at_eof 1 -reconnect_streamed 1 -reconnect_delay_max 5 -reconnect_on_network_error 1 -reconnect_on_http_error 4xx,5xx -rtbufsize 1M -probesize 2M -analyzeduration 5000000 -thread_queue_size 1024 -i [URL] -c:v copy -c:a copy -bsf:v h264_mp4toannexb,dump_extra -f mpegts -mpegts_copyts 1 -mpegts_start_pid 0x100 -mpegts_pmt_start_pid 0x1000 -avoid_negative_ts make_zero -fflags +genpts+igndts+discardcorrupt -copyts -muxdelay 0 -muxpreload 0 -flush_packets 1 -max_delay 0 -max_muxing_queue_size 9999 pipe:1",
        "transcodingArgs": "-hide_banner -loglevel error -reconnect 1 -reconnect_at_eof 1 -reconnect_streamed 1 -reconnect_delay_max 10 -reconnect_on_network_error 1 -reconnect_on_http_error 4xx,5xx -rtbufsize 2M -probesize 5M -analyzeduration 10000000 -thread_queue_size 2048 -i [URL] -c:v libx264 -preset veryfast -profile:v main -level 3.1 -pix_fmt yuv420p -b:v 2000k -maxrate 3000k -bufsize 6000k -g 60 -keyint_min 30 -sc_threshold 0 -x264opts keyint=60:min-keyint=30:scenecut=0:nal-hrd=cbr:force-cfr=1 -c:a aac -b:a 128k -ar 48000 -ac 2 -bsf:v h264_mp4toannexb,dump_extra -f mpegts -mpegts_copyts 1 -mpegts_start_pid 0x100 -mpegts_pmt_start_pid 0x1000 -avoid_negative_ts make_zero -fflags +genpts+igndts+discardcorrupt -max_muxing_queue_size 9999 -muxdelay 0 -muxpreload 0 -flush_packets 1 pipe:1",
        "hlsProtocolArgs": "-allowed_extensions ALL -protocol_whitelist file,http,https,tcp,tls,pipe,crypto -user_agent PlexBridge/1.0 -live_start_index 0 -http_persistent 1"
      },
      "androidtv": {
        "enabled": true,
        "ffmpegArgs": "-hide_banner -loglevel error -reconnect 1 -reconnect_at_eof 1 -reconnect_streamed 1 -reconnect_delay_max 5 -reconnect_on_network_error 1 -reconnect_on_http_error 4xx,5xx -rtbufsize 1M -probesize 2M -analyzeduration 5000000 -thread_queue_size 1024 -i [URL] -c:v copy -c:a copy -bsf:v h264_mp4toannexb,dump_extra,extract_extradata -f mpegts -mpegts_copyts 1 -mpegts_start_pid 0x100 -mpegts_pmt_start_pid 0x1000 -mpegts_pcr_period 20 -avoid_negative_ts make_zero -fflags +genpts+igndts+discardcorrupt+nobuffer -copyts -muxdelay 0 -muxpreload 0 -flush_packets 1 -max_delay 0 -max_muxing_queue_size 9999 -rtbufsize 512k pipe:1",
        "transcodingArgs": "-hide_banner -loglevel error -reconnect 1 -reconnect_at_eof 1 -reconnect_streamed 1 -reconnect_delay_max 5 -i [URL] -c:v libx264 -preset superfast -tune zerolatency -profile:v main -level 3.1 -pix_fmt yuv420p -b:v 2000k -maxrate 2500k -bufsize 2000k -g 30 -keyint_min 15 -sc_threshold 0 -x264opts keyint=30:min-keyint=15:scenecut=0:nal-hrd=cbr:force-cfr=1:repeat-headers=1:aud=1:sps-id=0:pps-id=0 -c:a aac -b:a 128k -ar 48000 -ac 2 -bsf:v h264_mp4toannexb,dump_extra -f mpegts -mpegts_copyts 1 -mpegts_start_pid 0x100 -mpegts_pmt_start_pid 0x1000 -avoid_negative_ts make_zero -fflags +genpts+igndts+discardcorrupt+nobuffer -flags +low_delay -max_muxing_queue_size 9999 -muxdelay 0 -muxpreload 0 -flush_packets 1 -rtbufsize 256k pipe:1",
        "segmentDuration": 30,
        "resetInterval": 1200,
        "audioCodecDetection": {
          "analyzeduration": 10000000,
          "probesize": 10000000,
          "maxAnalyzeAttempts": 3
        }
      }
    },
    "caching": {
      "enabled": true,
      "duration": 3600,
      "maxSize": 1073741824,
      "cleanup": {
        "enabled": true,
        "interval": 3600000,
        "maxAge": 86400000
      }
    },
    "device": {
      "name": "PlexTV Development",
      "id": "PLEXTV001",
      "tunerCount": 4,
      "firmware": "1.0.0",
      "baseUrl": "http://localhost:3000"
    },
    "network": {
      "bindAddress": "0.0.0.0",
      "advertisedHost": null,
      "streamingPort": 3000,
      "discoveryPort": 1900,
      "ipv6Enabled": false
    },
    "compatibility": {
      "hdHomeRunMode": true,
      "plexPassRequired": false,
      "gracePeriod": 10000,
      "channelLogoFallback": true
    }
  },
  "logging": {
    "level": "debug",
    "maxFiles": 14,
    "maxSize": "10m",
    "path": "/data/logs"
  },
  "security": {
    "sessionTimeout": 86400,
    "bcryptRounds": 10,
    "rateLimitMax": 1000,
    "rateLimitWindow": 900000
  }
}
